@model List<DataLayer.DTO.AdminDTO.OncallProviderData>
@{

    Layout = "_AdminPhysicianHeader";
}

<div>
    
    <div class="d-flex justify-content-center mt-3">
        <div class="container mt-3">
            <div class="d-inline-flex justify-content-between w-100">

                <h3 class="fw-bold">MDs On Call</h3>

                <div class="ml-auto">

                    <button class="  back-btn btn-outline-info back mt-2 rounded p-2 "
                            onclick="back()">
                        &lt Back
                    </button>
                </div>
            </div>
            <div class=" d-md-flex justify-content-between w-100  mt-3">
                <div class="p-3">
                    <select class="form-select h-100 regionDrop " aria-label="Default select example assignRegion">
                        <option value="0" selected>All Regions</option>

                    </select>
                </div>
                <div class="p-3">
                    <a asp-controller="Admin" asp-action="Scheduling" class="btn btn-info text-white text-decoration-none   ">Calender View</a>
                    <a asp-controller="Admin" asp-action="RequestedShifts" class="btn btn-info text-white  text-decoration-none">Shifts For Review</a>
                </div>
            </div>
            <div class="mt-3 bg-white rounded shadow p-3" id="OnCallPhy">
              

            </div>
        </div>
    </div>
</div>

<script>
   

    var str = "0";

    $(document).ready(function () {
        $.ajax({
            method: "GET",
            url: "/Admin/FetchRegions",
          
            success: function (response) {
                response.forEach(function (res) {
                    $('.regionDrop').append("<option value='" + res.regionid + "'>" + res.name + "</option>");
                });
            }
        });

        $.ajax({
            method: "GET",
            url: "/Admin/GetProviders",
            data: { region: str },
            success: function (result) {
                $("#OnCallPhy").html(result);
            }
        });

    });

    $('.regionDrop').change(function () {
        str = $('.regionDrop').val();
        $.ajax({
            method: "GET",
            url: "/Admin/GetProviders",
            data: { region: str },
            success: function (result) {
                $("#OnCallPhy").html(result);
            }
        });

    });

    
</script>